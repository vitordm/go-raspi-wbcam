<!DOCTYPE html>
<html>
<head>
	<title>Streaming de Vídeo em Tempo Real</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

</head>
<body>
	<div class="d-flex flex-row justify-content-center align-items-center align-content-center mt-3" style="min-height: 400px;">
		<!-- <video id="video" autoplay style="min-height: 500px; max-width: 500px;"></video> -->
		<img id="myImg" style="max-height: 500px;" title="Video Resul" alt="Frame of WebCam"></video>
		<!-- <canvas id="myCanvas" style="min-height: 500px; max-width: 500px;"></canvas> -->


	</div>
	
	
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
	<script>

	
		// var img = document.getElementById("scream");
		// ctx.drawImage(img, 10, 10);
		
		// Cria um WebSocket para se conectar ao servidor Gin
		const socket = new WebSocket("ws://localhost:8080/video");

		// Quando uma mensagem WebSocket for recebida
		socket.onmessage = function(event) {
			// Cria um objeto Blob a partir dos dados binários recebidos
			const blob = new Blob([event.data], { type: "image/jpeg" });

			// Cria uma URL temporária para o objeto Blob
			const url = window.URL.createObjectURL(blob);

			const image = new Image()
			image.src = url

			/*
			var canvas = document.getElementById("myCanvas");
			var ctx = canvas.getContext("2d");
			ctx.drawImage(image, 100, 100, 500, 500);

			// Atualiza o elemento <video> com o novo frame
			var video = document.getElementById("video");
			video.src = url;*/

			const img = document.getElementById("myImg");
			img.src = url;

		};
	</script>
</body>
</html>
